<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastrar Quest√£o - Campus UEL</title>

    <link rel="icon"
          href="data:image/svg+xml;charset=utf-8,
          <svg xmlns='http://www.w3.org/2000/svg' width='17' height='18'>
              <text y='15' font-size='14'>üíö</text>
          </svg>">
    <link rel="stylesheet" th:href="@{/geral/style.css}">
</head>
<body>

<nav>
    <div class="logo">
        <h1>Campus UEL</h1>
    </div>
    <ul class="nav-links">
        <li><a th:href="@{/}">Tela inicial</a></li>
        <li><a th:href="@{/usuarios}">Usu√°rios</a></li>
        <li><a th:href="@{/locais}">Locais</a></li>
        <li><a th:href="@{/questoes}">Quest√µes</a></li>
    </ul>
</nav>

<section class="hero">
    <h2>Cadastrar/Editar Quest√£o</h2>
    <p>Preencha os campos abaixo para cadastrar ou editar uma quest√£o de avalia√ß√£o.</p>
</section>

<section class="questoes-form">

    <form th:action="${questao.idQuestao} != null ? @{'/questoes/editar/' + ${questao.idQuestao}} : @{/questoes/salvar}"
          th:object="${questao}"
          method="post">

        <label for="texto">Texto da Quest√£o:</label>
        <textarea id="texto" th:field="*{texto}" required></textarea>

        <label for="tipo">Tipo de Quest√£o:</label>
        <select id="tipo" th:field="*{tipo}" required onchange="toggleOpcoes()">
            <option value="">Selecione...</option>
            <option value="padrao" th:selected="${questao.tipo == 'padrao'}">Texto (resposta aberta)</option>
            <option value="multipla" th:selected="${questao.tipo == 'multipla'}">M√∫ltipla escolha</option>
        </select>

        <div id="opcoes-container" style="display:none;">
            <label for="opcoes">Op√ß√µes (somente para m√∫ltipla escolha):</label>
            <small style="color:gray;">Separe as op√ß√µes por v√≠rgulas (,)</small>
            <input type="text" id="opcoes" th:field="*{opcoes}" placeholder="Ex: Ruim,Razo√°vel,Bom,Excelente">
        </div>

        <label for="idUsuarioCriador">ID do Usu√°rio Criador (opcional):</label>
        <input type="number" id="idUsuarioCriador" th:field="*{idUsuarioCriador}" placeholder="Deixe vazio se for global">

        <div style="display:flex; justify-content:space-between; margin-top:2rem;">
            <a href="/questoes" class="btn">Voltar</a>
            <button type="submit" class="btn" th:text="${questao.idQuestao != null ? 'Atualizar Quest√£o' : 'Salvar Quest√£o'}"></button>
        </div>
    </form>

</section>

<footer>
    <p>&copy; 2025 UEL - Todos os direitos reservados.</p>
</footer>

<script>
    function toggleOpcoes() {
        const tipoSelect = document.getElementById('tipo');
        const opcoesContainer = document.getElementById('opcoes-container');

        if (tipoSelect.value === 'multipla') {
            opcoesContainer.style.display = 'block';
        } else {
            opcoesContainer.style.display = 'none';
            document.getElementById('opcoes').value = '';
        }
    }

    document.addEventListener("DOMContentLoaded", function() {
        toggleOpcoes();
    });
</script>

</body>
</html>
