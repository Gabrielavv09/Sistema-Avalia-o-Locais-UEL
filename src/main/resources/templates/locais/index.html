<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Locais - Campus UEL</title>

    <link rel="icon" href="data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' width='17' height='18'><text y='15' font-size='14'>üíö</text></svg>">
    <link rel="stylesheet" th:href="@{./geral/style.css}">
</head>
<body>

<nav>
    <div class="logo">
        <h1>Campus UEL</h1>
    </div>
    <ul class="nav-links">
        <li><a th:href="@{/}">Tela inicial</a></li>
        <li><a th:href="@{/usuarios}">Usu√°rios</a></li>
        <li><a th:href="@{/locais}">Locais</a></li>
        <li><a th:href="@{/questoes}">Quest√µes</a></li>
    </ul>
</nav>

<section class="hero">
    <h2>Locais do Campus üìç</h2>
    <p>Gerencie os locais avaliados dentro do campus UEL.</p>
    <a href="/locais/novo" class="btn">Cadastrar Novo Local</a>
</section>

<section class="locais">
    <h3>Locais Cadastrados</h3>

    <form action="/locais" method="get" class="search-form" style="margin-bottom: 20px;">
        <input type="text" name="termo" placeholder="Buscar local..." th:value="${termo}" style="padding: 10px; width: 300px;">
        <button type="submit" class="btn">Buscar</button>
        <a href="/locais" class="btn" style="background-color: #6c757d;">Limpar</a>
    </form>

    <div class="locais-list">
        <div class="local-card card-hover"
             th:each="local : ${locais}"
             th:attr="data-nome=${local.nome},
                      data-descricao=${local.descricao},
                      data-localizacao=${local.localizacao},
                      data-imagem=${local.urlImage}">

            <img th:if="${local.urlImage}" th:src="${local.urlImage}" alt="Imagem do Local">
            <h4 th:text="${local.nome}">Nome do Local</h4>

            <div style="display:flex; gap:1rem; margin-top:1rem;">
                <a th:href="@{/locais/editar/{id}(id=${local.idLocal})}" class="btn">Editar</a>
                <a th:href="@{/locais/deletar/{id}(id=${local.idLocal})}" class="btn">Deletar</a>
            </div>
        </div>
        <div th:if="${locais.empty}">
            <p>Nenhum local encontrado.</p>
        </div>
    </div>
</section>

<div id="modal-local" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <img id="modal-img" src="" alt="Imagem do Local">
        <h2 id="modal-nome"></h2>
        <p><strong>Localiza√ß√£o:</strong> <span id="modal-localizacao"></span></p>
        <p><strong>Descri√ß√£o:</strong> <span id="modal-descricao"></span></p>
    </div>
</div>

<footer>
    <p>&copy; 2025 UEL - Todos os direitos reservados.</p>
</footer>

<script>
    const cards = document.querySelectorAll(".local-card");
    const modal = document.getElementById("modal-local");
    const modalImg = document.getElementById("modal-img");
    const modalNome = document.getElementById("modal-nome");
    const modalDescricao = document.getElementById("modal-descricao");
    const modalLocalizacao = document.getElementById("modal-localizacao");
    const closeBtn = document.querySelector(".close-btn");

    cards.forEach(card => {
        card.addEventListener("click", (e) => {
            // Evita abrir o modal se clicou nos bot√µes editar/deletar
            if(e.target.tagName === 'A') return;

            modalImg.src = card.dataset.imagem || "";
            modalNome.textContent = card.dataset.nome || "";
            modalDescricao.textContent = card.dataset.descricao || "";
            modalLocalizacao.textContent = card.dataset.localizacao || "";
            modal.classList.add("active");
        });
    });

    closeBtn.addEventListener("click", () => modal.classList.remove("active"));
    window.addEventListener("click", e => {
        if (e.target === modal) modal.classList.remove("active");
    });
</script>

</body>
</html>
